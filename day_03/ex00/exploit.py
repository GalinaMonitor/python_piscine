from bs4 import BeautifulSoup

html_file = 'evilcorp.html'
script_file = 'script.html'

# Initialization
page = open(html_file, 'r')
soup_html = BeautifulSoup(page.read(), 'html.parser')
body = soup_html.body
page.close()

script = open(script_file, 'r')
soup_script = BeautifulSoup(script.read(), 'html.parser')
script.close()

# Title
title = soup_html.title
title.string.replace_with('Evil Corp - Stealing your money every day')

# Link
href = soup_html.find('a')
href['href'] = 'https://mrrobot.fandom.com/wiki/Fsociety'
href.string = 'Fsociety'

# New h1 tag
new_tag = soup_html.new_tag('h1')
new_tag.append('Mr. Robot, ')
new_tag.append('you are hacked!')
body.insert(1, new_tag)

# New script tag
new_tag = soup_html.new_tag('script')
new_tag.append(soup_script.script.string)
body.append(new_tag)

# Final
page = open('evilcorp_hacked.html', 'w')
page.write(soup_html.prettify())
page.close()
